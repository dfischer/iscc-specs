# -*- coding: utf-8 -*-
from iscc import compute
from tests import HERE
from os.path import join


SAMPLE = join(HERE, "test.3gp")


def test_compute():
    result = compute.compute(SAMPLE)
    assert isinstance(result, dict)
    assert result == {
        "code": "EMAV4DUC6QORW4X4",
        "code_data": "GAA2Q3TYZFBE6BTJ",
        "code_instance": "IAAY2QAMLUTU2ZYE",
        "code_meta": "AAA73CA6R4XJLI5C",
        "datahash": "8d400c5d274d670476eb3e62d199c172084ea0760f65d8566f0a9aa19c335610",
        "duration": 60.042,
        "features": [
            "FiaCXl1a4t0",
            "XxqT9x1b8vw",
            "HGqWS0AW8oQ",
            "Vg7E_A8e8-w",
            "VB6U9A0fsuw",
            "VgYGfgj2tmQ",
            "dk6FTGUE8mc",
            "fw6FTHEI5vU",
            "PhiLzHlKZtE",
            "3hrD33VSdtE",
            "WhoTd31aUvk",
            "WkoX9v1S830",
            "XiwX9F1Sc3g",
            "XiQR1B1cdng",
            "Pm4X9f1S83o",
            "HmQX9P1aUn0",
            "f24Xtf1acv0",
            "l0qQp9wbcow",
            "WWAQktxZMqg",
            "CBsAt_oFyuE",
            "Hk4EXcQVMqU",
            "Uw6D6HwdUqw",
            "XybTRF1cRjg",
            "cUqSYHQVUrM",
            "Hk4GXNQVcSQ",
            "UQqD-j4cwv4",
        ],
        "filesize": 1337753,
        "fps": 24.0,
        "gmt": "video",
        "height": 144,
        "language": "en",
        "mediatype": "video/mp4",
        "signature_fps": 5,
        "sizes": [
            0.625,
            7.0,
            2.5,
            2.5,
            2.625,
            1.25,
            2.5,
            1.25,
            1.25,
            1.5,
            1.0,
            3.75,
            1.75,
            1.375,
            3.125,
            1.25,
            0.75,
            2.5,
            1.5,
            2.75,
            3.875,
            1.875,
            1.0,
            4.75,
            2.875,
            2.625,
        ],
        "title": "Kali by Anokato - Spiral Sessions 2019",
        "width": 176,
    }
